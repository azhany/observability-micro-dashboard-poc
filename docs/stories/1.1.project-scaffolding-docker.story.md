# Story 1.1: Project Scaffolding & Docker Environment

## Status
Ready

## Story
**As a** Developer,
**I want** a standardized Docker Compose environment with Laravel 11, MariaDB, and Redis,
**so that** I can develop and test the PoC in a consistent, portable environment.

## Acceptance Criteria
1. `docker-compose.yml` includes containers for PHP (App), MariaDB (DB), Redis (Cache/Queue), and Nginx.
2. Laravel 11 project is initialized with Inertia.js and Vue 3 scaffolding.
3. A "Health Check" route exists that verifies DB and Redis connectivity.
4. The environment supports `USE_MCP=true` for local agent interaction.

## Tasks / Subtasks
- [ ] Task 1: Initialize Project Structure (AC: 1, 2)
    - [ ] Create `/app` directory for Laravel.
    - [ ] Create `/agent` directory for future Go agent.
    - [ ] Create `/docker` directory for service configurations.
- [ ] Task 2: Setup Docker Environment (AC: 1, 4)
    - [ ] Create `docker-compose.yml` at root with `app`, `db`, `redis`, and `nginx` services.
    - [ ] Configure `Dockerfile` for the Laravel app (PHP 8.2+).
    - [ ] Ensure `.env` supports `USE_MCP=true`.
- [ ] Task 3: Initialize Laravel 11 with Inertia & Vue (AC: 2)
    - [ ] Install Laravel 11 in `/app`.
    - [ ] Install and configure Inertia.js with Vue 3 and TypeScript.
    - [ ] Setup Tailwind CSS 3.x.
- [ ] Task 4: Implement Health Check Route (AC: 3)
    - [ ] Create a `GET /health` route.
    - [ ] Implement logic to verify MariaDB connection.
    - [ ] Implement logic to verify Redis connection.
    - [ ] Return JSON response with status for each service.
- [ ] Task 5: Verification and Testing (AC: 1, 2, 3)
    - [ ] Verify all containers start successfully.
    - [ ] Verify Laravel welcome page (Inertia/Vue) is accessible.
    - [ ] Verify `/health` returns 200 OK with all systems up.

## Dev Notes
- **Infrastructure Context:** The system is optimized for single-node deployment via Docker Compose. Key services include Laravel 11 (PHP 8.2), MariaDB 10.11, and Redis 7. [Source: architecture/2-high-level-architecture.md#platform-and-infrastructure-choice]
- **Tech Stack:**
    - Backend: Laravel 11 [Source: architecture/3-tech-stack.md]
    - Frontend: Vue 3.4, Inertia.js, TypeScript 5.x, Tailwind CSS 3.x [Source: architecture/3-tech-stack.md]
- **Project Structure Alignment:**
    - `/app` - Laravel + Vue (Inertia)
    - `/agent` - Go System Agent
    - `/docker` - Service configs
    - `docker-compose.yml` at root
    [Source: architecture/9-unified-project-structure.md]
- **Configuration:** Ensure the `docker-compose.yml` uses the versions specified in the tech stack.

### Testing
- **Backend Testing:** Use Laravel's built-in PHPUnit suite for health check verification.
- **Frontend Testing:** Ensure Vue 3 components are testable with Vitest (preferred for Vue 3).
- **E2E Testing:** Playwright is the designated tool for E2E tests, though full E2E setup is planned for Story 2.4. [Source: architecture/3-tech-stack.md]

## Change Log
| Date | Version | Description | Author |
| :--- | :--- | :--- | :--- |
| 2026-01-18 | 1.0 | Initial Story Draft | Bob (Scrum Master) |

## Dev Agent Record
### Agent Model Used
<!-- To be populated by Dev Agent -->

### Debug Log References
<!-- To be populated by Dev Agent -->

### Completion Notes List
<!-- To be populated by Dev Agent -->

### File List
<!-- To be populated by Dev Agent -->

## QA Results
<!-- To be populated by QA Agent -->
