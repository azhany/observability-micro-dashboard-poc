# NFR Assessment: 2.1.base-dashboard-layout

Date: 2026-01-18
Reviewer: Quinn (Test Architect)

## Summary

- **Security:** FAIL - Missing auth middleware and tenant isolation.
- **Performance:** FAIL - Scalability bottleneck on metrics_raw table scan.
- **Reliability:** PASS - Proper error handling for missing data.
- **Maintainability:** PASS - Good structure and test coverage.

## Critical Issues

1. **Missing Auth Middleware (Security)**
   - **Risk:** Dashboard is accessible to unauthenticated users.
   - **Fix:** Apply `auth` and `verified` middleware to dashboard routes in `web.php`.

2. **No Tenant Isolation (Security)**
   - **Risk:** IDOR vulnerability; any authenticated user can view any tenant's dashboard.
   - **Fix:** Implement ownership checks in `DashboardController::show`.

3. **Performance Bottleneck (Performance)**
   - **Risk:** Dashboard overview will time out on large datasets.
   - **Fix:** Create a dedicated `agents` table or use a covering index on `(tenant_id, agent_id)`.

## Quick Wins

- Apply auth middleware: ~5 minutes
- Add `agents` table migration: ~30 minutes
- Implement Tenant Policy: ~1 hour
