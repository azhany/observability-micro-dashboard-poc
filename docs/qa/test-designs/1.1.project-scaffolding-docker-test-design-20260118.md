# Test Design: Story 1.1

Date: 2026-01-18
Designer: Quinn (Test Architect)

## Test Strategy Overview

- Total test scenarios: 7
- Unit tests: 2 (28%)
- Integration tests: 4 (57%)
- E2E tests: 1 (14%)
- Priority distribution: P0: 4, P1: 2, P2: 1

## Test Scenarios by Acceptance Criteria

### AC1: `docker-compose.yml` includes containers for PHP, MariaDB, Redis, and Nginx

#### Scenarios

| ID | Level | Priority | Test | Justification |
| :--- | :--- | :--- | :--- | :--- |
| 1.1-INT-001 | Integration | P0 | Validate all containers run | Critical infrastructure verification. |
| 1.1-INT-002 | Integration | P0 | Verify inter-container network | App must talk to DB/Redis. |

### AC2: Laravel 11 project is initialized with Inertia.js and Vue 3 scaffolding

#### Scenarios

| ID | Level | Priority | Test | Justification |
| :--- | :--- | :--- | :--- | :--- |
| 1.1-UNIT-001 | Unit | P1 | Verify Inertia Root Template | Ensure base HTML structure exists. |
| 1.1-E2E-001 | E2E | P1 | Load Welcome Page | Confirms Laravel+Inertia+Vue pipeline. |

### AC3: A "Health Check" route exists that verifies DB and Redis connectivity

#### Scenarios

| ID | Level | Priority | Test | Justification |
| :--- | :--- | :--- | :--- | :--- |
| 1.1-INT-003 | Integration | P0 | `GET /health` returns 200 OK | Critical monitoring endpoint. |
| 1.1-INT-004 | Integration | P1 | `GET /health` handles failures | Verify failure response if DB/Redis down. |

### AC4: The environment supports `USE_MCP=true` for local agent interaction

#### Scenarios

| ID | Level | Priority | Test | Justification |
| :--- | :--- | :--- | :--- | :--- |
| 1.1-UNIT-002 | Unit | P2 | Config service reads `USE_MCP` | Verify env var parsing logic. |
| 1.1-INT-005 | Integration | P0 | Network Policy check (if applicable) | Ensure agents can connect if true. |

*Note: 1.1-INT-005 is provisional based on specific network implementation of MCP.*

## Risk Coverage

- **SEC-001 (Insecure Docker)**: Covered by 1.1-INT-001 (Port binding checks can be added here).
- **TECH-001 (Connectivity)**: Covered by 1.1-INT-002, 1.1-INT-003.
- **TECH-002 (Build errors)**: Covered by 1.1-E2E-001.

## Recommended Execution Order

1.  **P0 Integration**: 1.1-INT-001, 1.1-INT-002, 1.1-INT-003 (Infrastructure basics)
2.  **P1 E2E**: 1.1-E2E-001 (Full stack verification)
3.  **P1 Integration/Unit**: 1.1-INT-004, 1.1-UNIT-001
4.  **P2 Unit**: 1.1-UNIT-002
