# Mosquitto Configuration for Observability
#
# SECURITY CONFIGURATION:
# - For PRODUCTION: Set MQTT_AUTH_ENABLED=true and configure passwords
# - For DEVELOPMENT: Set MQTT_AUTH_ENABLED=false for convenience
#
# Default: Authentication ENABLED for security

# Listener configuration
listener 1883
protocol mqtt

# WebSocket listener
listener 9001
protocol websockets

# Authentication Configuration
# CRITICAL: For production, ensure allow_anonymous is false
# and password_file is properly configured with hashed passwords
#
# To create password file:
#   docker exec observability-mosquitto mosquitto_passwd -c /mosquitto/config/passwd <username>
#
# For development only, you can temporarily set:
#   allow_anonymous true
#
# PRODUCTION SETTING (default):
allow_anonymous false
password_file /mosquitto/config/passwd

# Access Control List (ACL)
# Restricts topic access by user
acl_file /mosquitto/config/acl

# Persistence
persistence true
persistence_location /mosquitto/data/

# Logging
log_dest file /mosquitto/log/mosquitto.log
log_dest stdout
log_type all

# Connection settings
max_queued_messages 1000
message_size_limit 0

# Security settings
# Require protocol version 3.1.1 or higher
protocol_version mqttv311
