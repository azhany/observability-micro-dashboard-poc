[program:mqtt-bridge]
command=php /var/www/html/artisan mqtt:bridge --host=mosquitto --port=1883 --username=bridge_user --password=%(ENV_MQTT_BRIDGE_PASSWORD)s
directory=/var/www/html
user=www-data
autostart=true
autorestart=true
startsecs=5
startretries=3
stdout_logfile=/var/log/supervisor/mqtt-bridge.log
stdout_logfile_maxbytes=10MB
stdout_logfile_backups=5
stderr_logfile=/var/log/supervisor/mqtt-bridge-error.log
stderr_logfile_maxbytes=10MB
stderr_logfile_backups=5
redirect_stderr=false
stopwaitsecs=10
stopsignal=TERM

; Environment variables
environment=
    LARAVEL_ENV="production"

; Process priority (lower number = higher priority)
priority=999

; Graceful shutdown
stopasgroup=true
killasgroup=true
